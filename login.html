<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=yes, initial-scale=1.0, maximum-scale=10.0, minimum-scale=0.1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet"/>

    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="styles/login.css">
    <title>Lights On Devs login</title>
</head>
<body>

<header>
    <nav>
        <ul id="navbar">
            <li id="brand">
                <object id="logo" data="imgs/lod_logo.svg" type="image/svg+xml"></object>
                <a class="logo-txt" href="http://localhost:63342/lights_on_devs/index.html">LIGHTS ON DEVS</a>
            </li>

            <li class="nav-links">
                <a href="#">Explore</a>
                <a href="#">Jobs</a>
            </li>

<!--            <li id="user-tools">-->
<!--                <button type="button" class="btn"><span class="material-symbols-outlined">notifications</span></button>-->
<!--                <button type="button" class="btn"><span class="material-symbols-outlined">mail</span></button>-->
<!--                <button type="button" class="btn btn-long btn-accent"><span-->
<!--                        class="material-symbols-outlined">edit</span>New Project-->
<!--                </button>-->
<!--                <button type="button" class="btn"><span class="material-symbols-outlined">account_circle</span></button>-->
<!--            </li>-->

        </ul>
    </nav>
</header>

<section>
    <form action="#" id="login">
        <div class="d-flex">
            <label for="userName">
            user :
            </label>
            <input type="text" name="userName" id="userName">
        </div>
        <div class="d-flex">
            <label for="password">
                password :
            </label>
            <input type="text" name="userName" id="password">
        </div>
        <button class="btn btn-accent" type="submit">Login</button>
        <a href="http://www.cheh.fr">Forgot password?</a>
        <p>Donâ€™t have an account yet ? </p>
        <a href="http://">Sign Up</a>
    </form>
</section>

<footer>

    <div class="logo-txt">LIGHTS ON DEVS</div>
    <object class="logo" data="imgs/lod_logo.svg" type="image/svg+xml"></object>

</footer>

<script>
    let userElem = document.querySelector('#userName');
    let password = document.querySelector('#password');
    let form = document.querySelector('#login');

    let timeOut = null;
    form.addEventListener("submit", function (e) {
        e.preventDefault();
        if (userElem.value === "nicso" && password.value === "motdepasseenclair") {
            open('http://localhost:63342/lights_on_devs/index.html?loggedas=' + userElem.value);
        } else {
            if(form.querySelector('.error') === null )
            {
                let error = document.createElement("p");
                error.textContent = "Wrong password";
                error.style.color = "red";
                error.classList.add("error");
                form.append(error);
                timeOut = setTimeout(function () {
                    error.remove();
                }, 3200);
            }else {
                let error = document.querySelector(".error");
                error.style.animation = "none";
                error.offsetHeight;
                error.style.animation = null;
                clearTimeout(timeOut);
                timeOut = setTimeout(function () {
                    error.remove();
                }, 3200);
            }
        }
    });


</script>

</body>
</html>