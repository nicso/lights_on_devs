{"version":3,"file":"index-X2mjLDJS.js","sources":["../../src/feature/image-block/index.ts"],"sourcesContent":["import { imageBlockComponent, imageBlockConfig } from '@milkdown/kit/component/image-block'\nimport { imageInlineComponent, inlineImageConfig } from '@milkdown/kit/component/image-inline'\nimport type { DefineFeature, Icon } from '../shared'\nimport { captionIcon, confirmIcon, imageIcon } from '../../icons'\n\ninterface ImageBlockConfig {\n  onUpload: (file: File) => Promise<string>\n\n  inlineImageIcon: Icon\n  inlineConfirmButton: Icon\n  inlineUploadButton: Icon\n  inlineUploadPlaceholderText: string\n  inlineOnUpload: (file: File) => Promise<string>\n\n  blockImageIcon: Icon\n  blockConfirmButton: Icon\n  blockCaptionIcon: Icon\n  blockUploadButton: Icon\n  blockCaptionPlaceholderText: string\n  blockUploadPlaceholderText: string\n  blockOnUpload: (file: File) => Promise<string>\n}\n\nexport type ImageBlockFeatureConfig = Partial<ImageBlockConfig>\n\nexport const defineFeature: DefineFeature<ImageBlockFeatureConfig> = (editor, config) => {\n  editor\n    .config((ctx) => {\n      ctx.update(inlineImageConfig.key, value => ({\n        uploadButton: config?.inlineUploadButton ?? (() => 'Upload'),\n        imageIcon: config?.inlineImageIcon ?? (() => imageIcon),\n        confirmButton: config?.inlineConfirmButton ?? (() => confirmIcon),\n        uploadPlaceholderText: config?.inlineUploadPlaceholderText ?? 'or paste link',\n        onUpload: config?.inlineOnUpload ?? config?.onUpload ?? value.onUpload,\n      }))\n      ctx.update(imageBlockConfig.key, value => ({\n        uploadButton: config?.blockUploadButton ?? (() => 'Upload file'),\n        imageIcon: config?.blockImageIcon ?? (() => imageIcon),\n        captionIcon: config?.blockCaptionIcon ?? (() => captionIcon),\n        confirmButton: config?.blockConfirmButton ?? (() => 'Confirm'),\n        captionPlaceholderText: config?.blockCaptionPlaceholderText ?? 'Write Image Caption',\n        uploadPlaceholderText: config?.blockUploadPlaceholderText ?? 'or paste link',\n        onUpload: config?.blockOnUpload ?? config?.onUpload ?? value.onUpload,\n      }))\n    })\n    .use(imageBlockComponent)\n    .use(imageInlineComponent)\n}\n"],"names":[],"mappings":"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"}